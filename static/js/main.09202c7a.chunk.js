(this.webpackJsonpcurrencies=this.webpackJsonpcurrencies||[]).push([[0],{110:function(e,t,a){e.exports=a(232)},115:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),o=(a(115),a(104)),u=a(7),s=a(247),i=a(246),m=a(98),f=function(){return r.a.createElement("footer",{className:"p-4 d-flex algin-items-center justify-content-center"},r.a.createElement(m.a,{variant:"link",href:"https://exchangeratesapi.io/"},"Source"),r.a.createElement(m.a,{variant:"link",href:"https://www.ecb.europa.eu/stats/policy_and_exchange_rates/euro_reference_exchange_rates/html/index.en.html"},"Data sets"))},h=a(107),E=a(18),d=a(43),b=a.n(d),p=a(68),v=a(248),y=a(238),g=a(249),k=Object(n.memo)((function(e){var t=e.pages,a=e.page,n=e.setPage,c=e.prevPage,l=e.nextPage,o=e.thead,u=e.tbody;return r.a.createElement("div",{className:"my-4"},r.a.createElement("div",{className:"my-4"},r.a.createElement("h2",null,"Table"),r.a.createElement("h3",null,"Total pages: ",t)),r.a.createElement(y.a,{responsive:!0,striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,o.map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,u.map((function(e){return r.a.createElement("tr",{key:e.date},r.a.createElement("td",null,e.date),e.prices.map((function(e){return r.a.createElement("td",{key:e.id},JSON.stringify(e.text))})))})))),t&&t>1?r.a.createElement(g.a,{className:"d-flex align-items-center justify-content-center"},r.a.createElement(g.a.First,{onClick:function(){return n(0)}}),r.a.createElement(g.a.Prev,{onClick:c}),r.a.createElement(g.a.Ellipsis,null),r.a.createElement(g.a.Item,{active:!0},a+1),r.a.createElement(g.a.Ellipsis,null),r.a.createElement(g.a.Next,{onClick:l}),r.a.createElement(g.a.Last,{onClick:function(){return n(t-1)}})):null)})),O=r.a.memo((function(e){var t=e.history,a=Object.keys(t),c=Math.ceil(a.length/20),l=Object(n.useState)(c),o=Object(E.a)(l,2),u=o[0],s=o[1],i=function(e){var t=Object.keys(e),a=[],n=["DATE"],r=t[t.length-1];return r&&Object.keys(e[r]).forEach((function(e){n.push(e)})),t.forEach((function(t){var n=[];Object.values(e[t]).forEach((function(e){n.push({text:e,id:Object(v.a)()})})),a.push({date:t,prices:n})})),{thead:n,tbody:a}}(function(e){var t=Object.keys(e);t.sort((function(e,t){return new Date(t)-new Date(e)}));var a=[],n={},r=0;return t.forEach((function(t){r+=1,n[t]=e[t],20===r&&(a.push(n),n={},r=0)})),a.push(n),a}(t)[u]),m=i.thead,f=i.tbody;return r.a.createElement(k,{pages:c,page:u,setPage:s,prevPage:function(){s((function(e){return e>0?e-1:e}))},nextPage:function(){s((function(e){return e<c-1?e+1:e}))},thead:m,tbody:f})})),j=a(99),C=Object(n.memo)((function(e){var t=e.data;return r.a.createElement(j.Line,{data:t,options:{responsive:!0}})})),w=function(e){var t={},a=!0,n=Object.keys(e);n.sort((function(e,t){return new Date(e)-new Date(t)})),n.forEach((function(n){var r=Object.keys(e[n]);r.length>0&&(a?(r.forEach((function(a){t[a]=[{value:e[n][a],date:n}]})),a=!1):r.forEach((function(a){t[a].push({value:e[n][a],date:n})})))}));var r=Object.keys(t),c=[];return r.forEach((function(e){var a=t[e].map((function(e){return e.value})),n=function(){var e=function(e,t){return e+Math.floor(Math.random()*(t-e+1))},t=e(0,255),a=e(0,255),n=e(100,255);return"rgb(".concat(t,",").concat(a,",").concat(n,")")}();c.push({label:e,backgroundColor:n,borderColor:n,data:a})})),{labels:n,datasets:c}},x=Object(n.memo)((function(e){var t=e.history,a=Object(n.useRef)(null),c=function(e){var t=Object.keys(e),a=Math.ceil(t.length/30),n=0,r={};return t.forEach((function(t){n===a?(r[t]=e[t],n=0):n+=1})),r}(t),l=w(c);return r.a.createElement("div",{ref:a},r.a.createElement(C,{data:l}),r.a.createElement(m.a,{variant:"link",href:"/",onClick:function(){var e=a.current.querySelector("canvas"),t=a.current.querySelector("a"),n=e.toDataURL("image/png");t.href=n,t.download="chart.png"}},"Download"))})),S=a(239),Y=a(244),M=a(21),D=a.n(M),N="MONTHS_1",_="MONTHS_3",A="MONTHS_6",L="YEARS_1",B="YEARS_5",T="MAX",P=function(e){var t=e.startAt,a=e.endAt,n=e.setStartAt,c=e.setEndAt,l=function(e){var t=D()().format("YYYY-MM-DD");switch(e){case N:n(D()().subtract(1,"months").format("YYYY-MM-DD")),c(t);break;case _:n(D()().subtract(3,"months").format("YYYY-MM-DD")),c(t);break;case A:n(D()().subtract(6,"months").format("YYYY-MM-DD")),c(t);break;case L:n(D()().subtract(1,"years").format("YYYY-MM-DD")),c(t);break;case B:n(D()().subtract(5,"years").format("YYYY-MM-DD")),c(t);break;case T:n("1999-01-04"),c(t);break;default:return null}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mb-4"},r.a.createElement("h3",null,"Select period"),r.a.createElement(S.a,{"aria-label":"Date period"},r.a.createElement(m.a,{onClick:l.bind(null,N)},"1M"),r.a.createElement(m.a,{onClick:l.bind(null,_)},"3M"),r.a.createElement(m.a,{onClick:l.bind(null,A)},"6M"),r.a.createElement(m.a,{onClick:l.bind(null,L)},"1R"),r.a.createElement(m.a,{onClick:l.bind(null,B)},"5L"),r.a.createElement(m.a,{onClick:l.bind(null,T)},"Max"))),r.a.createElement("h3",null,"Custom"),r.a.createElement(Y.a,{className:"mb-4"},r.a.createElement(Y.a.Label,null,"startAt"),r.a.createElement(Y.a.Control,{onChange:function(e){return n(e.target.value)},value:t,type:"date",name:"startAt"}),r.a.createElement(Y.a.Label,null,"endAt"),r.a.createElement(Y.a.Control,{onChange:function(e){return c(e.target.value)},value:a,type:"date",name:"endAt"})))},R=a(245),I=function(e){var t=e.availableCurrencies,a=e.setBase,n=e.base;return r.a.createElement(R.a,{className:"mb-4"},r.a.createElement("h3",null,"Base: ",n),r.a.createElement(R.a.Toggle,{id:"dropdown-currencies"},"Switch Base"),r.a.createElement(R.a.Menu,null,t.map((function(e){return r.a.createElement(R.a.Item,{active:e===n,key:e,onClick:a.bind(null,e)},e)}))))},H=function(e){var t=e.availableCurrencies,a=e.selectCurrency,n=e.selectedCurrencies,c=[];return t.forEach((function(e){var t=!1;-1!==n.findIndex((function(t){return t===e}))&&(t=!0),c.push({currency:e,checked:t})})),r.a.createElement("div",{className:"mb-4"},r.a.createElement("h3",null,"Select currencies"),r.a.createElement(Y.a,null,c.map((function(e){return r.a.createElement(Y.a.Check,{key:e.currency,defaultChecked:e.checked,label:e.currency,type:"checkbox",onClick:a.bind(null,e.currency)})}))))},F=a(243),J=function(e){var t=e.show,a=e.error,n=e.onClose;return r.a.createElement(F.a,{show:t,onHide:n,centered:!0},r.a.createElement(F.a.Header,{closeButton:!0},r.a.createElement(F.a.Title,null,"Error message")),r.a.createElement(F.a.Body,null,a),r.a.createElement(F.a.Footer,null,r.a.createElement(m.a,{variant:"primary",onClick:n},"Ok")))},U=a(240),q=function(e){var t=e.show;return r.a.createElement("div",{style:{zIndex:100,position:"fixed",width:"100px",height:"100px",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},t?r.a.createElement(U.a,{animation:"border",role:"status",style:{position:"relative",width:"100px",height:"100px"}},r.a.createElement("span",{className:"sr-only"},"Loading...")):null)},W=a(241),z=a(242),X=a(100),$=a(103),G=a.n($).a.create({baseURL:"https://api.exchangeratesapi.io"}),K=function(){var e=Object(p.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.get("/latest");case 2:return a=e.sent,n=a.data.rates,r=Object.keys(n),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(b.a.mark((function e(t,a,n,r){var c,l,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length<=0)){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,G.get("/history?start_at=".concat(t,"&end_at=").concat(a,"&base=").concat(n,"&symbols=").concat(r.toString()));case 4:return c=e.sent,l=c.data.rates,o={},Object.keys(l).forEach((function(e){o[e]=l[e]})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),V=function(){var e=Object(n.useState)(null),t=Object(E.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),o=Object(E.a)(l,2),u=o[0],s=o[1],i=Object(n.useState)([]),m=Object(E.a)(i,2),f=m[0],d=m[1],b=Object(n.useState)([]),p=Object(E.a)(b,2),v=p[0],y=p[1],g=D()(new Date).format("YYYY-MM-DD"),k=Object(n.useState)("2019-04-01"),j=Object(E.a)(k,2),C=j[0],w=j[1],S=Object(n.useState)(g),Y=Object(E.a)(S,2),M=Y[0],N=Y[1],_=Object(n.useState)("EUR"),A=Object(E.a)(_,2),L=A[0],B=A[1],T=Object(n.useState)(["PLN"]),R=Object(E.a)(T,2),F=R[0],U=R[1];Object(n.useEffect)((function(){K(c).then((function(e){d(e),s(!1)})).catch((function(e){return c("Server error")}))}),[]),Object(n.useEffect)((function(){s(!0),Q(C,M,L,F).then((function(e){y(e),s(!1)})).catch((function(e){var t="Symbols '".concat(F.toString(),"' are invalid.");return e.response||e.response.data.error===t?c("No historical data reduce the time period or remove the last currency."):c("Server error"),s(!1),[]}))}),[L,C,M,F]);return r.a.createElement(W.a,{fluid:!0},r.a.createElement(q,{show:u}),r.a.createElement(J,{show:!!a,error:a,onClose:function(){return c(null)}}),r.a.createElement("h1",null,"Currencies"),r.a.createElement(z.a,null,r.a.createElement(X.a,{lg:"8"},r.a.createElement(x,{history:v})),r.a.createElement(X.a,{lg:"4",className:"my-4"},r.a.createElement(z.a,null,r.a.createElement(X.a,null,r.a.createElement(I,{availableCurrencies:f,base:L,setBase:B}),r.a.createElement(P,{startAt:C,endAt:M,setStartAt:w,setEndAt:N})),r.a.createElement(X.a,null,r.a.createElement(H,{availableCurrencies:f,selectedCurrencies:F,selectCurrency:function(e){var t=Object(h.a)(F);-1!==t.findIndex((function(t){return t===e}))?t=t.filter((function(t){return t!==e})):t.push(e),U(t)}}))))),r.a.createElement(O,{history:v}))};function Z(){return r.a.createElement(o.a,null,r.a.createElement(s.a,null,r.a.createElement(s.a.Brand,{href:"/"},"Currencies"),r.a.createElement(s.a.Toggle,{"aria-controls":"basic-Navbar-nav"}),r.a.createElement(s.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(i.a,{className:"mr-auto"},r.a.createElement(i.a.Link,{href:"https://exchangeratesapi.io/"},"Source"),r.a.createElement(i.a.Link,{href:"https://www.ecb.europa.eu/stats/policy_and_exchange_rates/euro_reference_exchange_rates/html/index.en.html"},"Data sets")))),r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/"},r.a.createElement(V,null))),r.a.createElement(f,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[110,1,2]]]);
//# sourceMappingURL=main.09202c7a.chunk.js.map